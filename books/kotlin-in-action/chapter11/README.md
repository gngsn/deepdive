# CHAPTER 11. Generics

<small><i>μ λ„¤λ¦­μ¤</i></small>

<br/>

- **μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°<sup>Reified type parameters</sup>**μ„ μ‚¬μ©ν•λ©΄, μΈλΌμΈ ν•¨μ νΈμ¶μ—μ„ νƒ€μ… μΈμλ΅ μ“°μΈ κµ¬μ²΄μ μΈ νƒ€μ…μ„ μ‹¤ν–‰ μ‹μ μ— μ• μ μμ
  - μΌλ° ν΄λμ¤λ‚ ν•¨μμ κ²½μ° νƒ€μ… μΈμ μ •λ³΄κ°€ μ‹¤ν–‰ μ‹μ μ— μ‚¬λΌμ§€κΈ° λ•λ¬Έμ— μ΄λ° μΌμ΄ λ¶κ°€λ¥
- **μ„ μ–Έ μ§€μ  λ³€μ„±<sup>Declaration-site variance</sup>**μ„ μ‚¬μ©ν•λ©΄, λ² μ΄μ¤ νƒ€μ…μ€ κ°™μ§€λ§ νƒ€μ… μΈμκ°€ λ‹¤λ¥Έ λ‘ μ λ„¤λ¦­ νƒ€μ…μ΄ μμ„ λ•, λ‘ μ λ„¤λ¦­ νƒ€μ…μ μƒν•μ„ νƒ€μ… κ΄€κ³„κ°€ μ–΄λ–»κ² λλ”μ§€ μ§€μ •ν•  μ μμ
  - κ°€λ Ή, `List<Any>` λ¥Ό μΈμλ΅ λ°›λ” ν•¨μμ— `List<Int>` νƒ€μ…μ κ°’μ„ μ „λ‹¬ κ°€λ¥ μ—¬λ¶€λ¥Ό μ§€μ •

<br/>

## 11.1 Creating types with type arguments: Generic type parameters

<small><i>νƒ€μ… μΈμλ¥Ό λ°›λ” νƒ€μ… λ§λ“¤κΈ°: μ λ„¤λ¦­ νƒ€μ… νλΌλ―Έν„°</i></small>

- μ λ„¤λ¦­μ¤λ” νƒ€μ… νλΌλ―Έν„°λ΅ λ°›λ” νƒ€μ… μ •μ
- μ λ„¤λ¦­ νƒ€μ…μ μΈμ¤ν„΄μ¤ μƒμ„± μ‹, νƒ€μ… νλΌλ―Έν„°λ¥Ό κµ¬μ²΄μ μΈ νƒ€μ… μΈμλ΅ μΉν™
- μ½”ν‹€λ¦° μ»΄νμΌλ¬λ” λ³΄ν†µ νƒ€μ…κ³Ό λ§μ°¬κ°€μ§€λ΅ νƒ€μ… μΈμλ„ μ¶”λ΅ 
- λΉ λ¦¬μ¤νΈμ κ²½μ°, νƒ€μ… μ¶”λ΅  κ·Όκ±°κ°€ μ—†κΈ° λ•λ¬Έμ— νƒ€μ… μΈμλ¥Ό λ…μ‹ν•΄μ•Ό ν•¨
  - `val readers: MutableList<String> = mutableListOf()`
  - = `val readers = mutableListOf<String>`

<br/>

<table><tr><td>

#### μ½”ν‹€λ¦°μ—λ” λ΅(raw) νƒ€μ…μ΄ μ—†μ

- μλ°”λ” 1.5 μ— μ λ„¤λ¦­μ„ λ¦κ² λ„μ…ν–κΈ° λ•λ¬Έμ—, μ΄μ „ λ²„μ „ νΈν™μ„±μ„ μ„ν•΄ νƒ€μ… μΈμκ°€ μ—†λ” μ λ„¤λ¦­ νƒ€μ…(raw type) ν—μ©
- μ¦‰, μλ°”μ—μ„λ” λ¦¬μ¤νΈ μ›μ† νƒ€μ…μ„ μ§€μ •ν•μ§€ μ•μ•„λ„ μ„ μ–Έ κ°€λ¥

```java
// Java
ArrayList aList = new ArrayList();
```

λ°λ©΄ μ½”ν‹€λ¦°μ—μ„λ”, λ°λ“μ‹ μ λ„¤λ¦­ νƒ€μ…μ μΈμ νƒ€μ…λ¥Ό λ…μ‹ν•κ±°λ‚ μ»΄νμΌλ¬κ°€ μ¶”λ΅  κ°€λ¥ν•λ„λ΅ ν•΄μ•Ό ν•¨

</td></tr></table>

<br/>

### 11.1.1 Functions and properties that work with generic types

<small><i>μ λ„¤λ¦­ νƒ€μ…κ³Ό ν•¨κ» λ™μ‘ν•λ” ν•¨μμ™€ ν”„λ΅νΌν‹°</i></small>

- μ»¬λ ‰μ…μ„ λ‹¤λ£¨λ” λΌμ΄λΈλ¬λ¦¬ ν•¨μλ” λ€λ¶€λ¶„ μ λ„¤λ¦­ ν•¨μ

```kotlin
fun <T> List<T>.slice(indices: IntRange): List<T>
```

- νƒ€μ… νλ¦¬λ―Έν„°κ°€ μμ‹  κ°μ²΄μ™€ λ°ν™ νƒ€μ…μ— μ“°μ΄λ”λ°, λ€λ¶€λ¶„ μ»΄νμΌλ¬κ°€ νƒ€μ… μΈμλ¥Ό μ¶”λ΅ ν•΄μ„ λ‘ λ‹¤ λ…μ‹ν•μ§€ μ•μ

```kotlin
// μ‚¬μ©
val letters = ('a'..'z').toList()
letters.slice<Char>(0..2)   // λ…μ‹μ  νƒ€μ… μΈμ μ§€μ •
letters.slice(10..13)       // νƒ€μ… μΈμ μƒλµ
```

<br/>

- ν΄λμ¤λ‚ μΈν„°νμ΄μ¤ μ•μ— μ •μλ **λ©”μ„λ“**, **μµμƒμ„ ν•¨μ**, **ν™•μ¥ ν•¨μ**μ—μ„ νƒ€μ… νλΌλ―Έν„° μ„ μ–Έ κ°€λ¥
- μ λ„¤λ¦­ ν•¨μλ¥Ό μ •μν•  λ•μ™€ λ§μ°¬κ°€μ§€ κµ¬λ¬ΈμΌλ΅ μ λ„¤λ¦­ **ν™•μ¥ ν”„λ΅νΌν‹°**λ¥Ό μ„ μ–Έν•  μ μμ
  - ```kotlin
      val <T> List<T>.penultimate: T  // λ¨λ“  λ¦¬μ¤νΈ νƒ€μ…μ—μ„ μ‚¬μ© κ°€λ¥
        get() = this[size - 2]
    ```
- **ν™•μ¥ ν”„λ΅νΌν‹°**κ°€ μ•„λ‹ μΌλ° ν”„λ΅νΌν‹°λ” μ λ„¤λ¦­ λ¶κ°€
  - `val <T> x: T = TODO()` β† `ERROR: type parameter of a property must be used in its receiver type`

<br/>

### 11.1.2 Generic classes are declared with the angle bracket syntax

<small><i>μ λ„¤λ¦­ ν΄λμ¤λ¥Ό ν™€ν™”μ‚΄κ΄„νΈ κµ¬λ¬Έμ„ μ‚¬μ©ν•΄ μ„ μ–Έν•λ‹¤</i></small>

μ½”ν‹€λ¦°λ„ μλ°”μ™€ λ™μΌν•κ², ν΄λμ¤λ‚ μΈν„°νμ΄μ¤μ— νƒ€μ… νλΌλ―Έν„°λ¥Ό λ„£μ€ **ν™‘ν™”μ‚΄κ΄„νΈ(`<>`)**λ¥Ό λ¶™μ—¬ μ λ„¤λ¦­ ν‘ν„

**μλ°” μ λ„¤λ¦­μ¤μ™€ λΉ„μ·ν• μ **

- ν΄λμ¤ λ³Έλ¬Έ μ•μ—μ„ νƒ€μ… νλΌλ―Έν„°λ¥Ό λ‹¤λ¥Έ μΌλ° νƒ€μ…μ²λΌ μ‚¬μ©
- ν΄λμ¤κ°€ μμ‹ μ„ νƒ€μ… μΈμλ΅ μ°Έμ΅°ν•  μλ„ μμ

<br/>
<pre lang="kotlin">
interface Comparable<T> {
  fun compareTo(other: T): Int
}

class String : <b>Comparable\<String\></b> {
override fun compareTo(other: String): Int = TODO() // Comparable μΈν„°νμ΄μ¤μ νƒ€μ… νλΌλ―Έν„° μ‚¬μ©
}

</pre>

<br/>

### 11.1.3 Restricting the type a generic class or function can use: Type parameter constraints

<small><i>μ λ„¤λ¦­ ν΄λμ¤λ‚ ν•¨μκ°€ μ‚¬μ©ν•  μ μλ” νƒ€μ… μ ν•: νƒ€μ… νλΌλ―Έν„° μ μ•½</i></small>

- νƒ€μ… νλΌλ―Έν„° μ μ•½ <sup>type Parameter constraint</sup>: ν΄λμ¤λ‚ ν•¨μμ— μ‚¬μ©ν•  μ μλ” νƒ€μ… μΈμλ¥Ό μ ν•ν•λ” κΈ°λ¥
  - e.g. μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… νλΌλ―Έν„°λ¥Ό νΉμ • μƒκ³„ νƒ€μ…<sup>upper bound</sup> μΌλ΅ μ§€μ •
  - β†’ μƒκ³„ νƒ€μ… νΉμ€ μƒκ³„ νƒ€μ…μ ν•μ„ νƒ€μ…(ν•μ„ ν΄λμ¤)μ΄μ–΄μ•Ό ν•¨
- **ν•μ‹**: νƒ€μ… νλΌλ―Έν„° μ΄λ¦„ λ’¤μ— ν΄λ΅ (`:`) μ™€ μƒκ³„ νƒ€μ… μ‘μ„±

```kotlin
 νƒ€μ… νλΌλ―Έν„°
    β€”β€”
fun <T : Number> List<t>.sum(): T
       β€”β€”β€”β€”β€”β€”β€”β€”
          μƒκ³„
```

<br/>
<table><tr><td>
β οΈ μλ°”μ—μ„λ” `extends` λ¥Ό μ‚¬μ©ν•΄μ„ λ™μΌν•κ² ν‘ν„

`<T extends Number> T sum(List<T> 1ist)`

</td></tr></table><br/>

Number λ”μ½”ν‹€λ¦° ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬μ—μ„ μ«μ νƒ€μ…μ„ ν‘ν„ν•λ” λ¨λ“  ν΄λμ¤μ μƒμ„ ν΄λμ¤

```kotlin
listof (1, 2, 3) sum()    // 6
```

- νƒ€μ… νλΌλ―Έν„° `T` μ μƒκ³„λ¥Ό μ§€μ •ν•λ©΄, ν•΄λ‹Ή μƒκ³„ νƒ€μ…μΌλ΅ μ·¨κΈ‰
- μƒκ³„ νƒ€μ…μ μ •μ λ©”μ„λ“ νΈμ¶

```kotlin
fun <T : Number> oneHalf(value: T): Double {
  return value.toDouble() / 2.0   // NUmber ν΄λμ¤μ μ •μ λ©”μ„λ“ νΈμ¶
}
```

<br/>

#### νƒ€μ… νλΌλ―Έν„°μ— μ—¬λ¬ μ μ•½μ„ κ°€ν•κΈ°

λ“λ¬Όκ² νƒ€μ… νλΌλ―Έν„°μ— λ€ν•΄ λ‘ μ΄μƒμ μ μ•½μ„ κ°€ν•΄μ•Ό ν•λ” κ²½μ°κ°€ μμ

Example. `CharSequence` μ λ§¨ λμ— λ§μΉ¨ν‘κ°€ μλ”μ§€ κ²€μ‚¬ν•λ” μ λ„¤λ¦­ ν•¨μ

β†’ **λ°μ΄ν„° μ ‘κ·Ό μ—°μ‚°**(`endsWith`) κ³Ό **λ°μ΄ν„° λ³€κ²½ μ—°μ‚°**(`append`) μ„ λ¨λ‘ μ‚¬μ©

<br/>
<pre lang="kotlin"><code>
fun \<T\> ensureTrailingPeriod(seq: T)
    <b>where T : CharSequence, T : Appendable {   // νƒ€μ… νλΌλ―Έν„° μ μ•½ λ©λ΅
  if (!seq.endsWith('.')) {
    seq.append('.')
  }
}
</code></pre>

<br/>

### 11.1.4 Excluding nullable type arguments by explicitly marking type parameters as non-null

<small><i>λ…μ‹μ μΌλ΅ νƒ€μ… νλΌλ―Έν„°λ¥Ό λ„μ΄ λ  μ μ—†λ” νƒ€μ…μΌλ΅ ν‘μ‹ν•΄μ„ λ„μ΄ λ  μ
μλ” νƒ€μ… μΈμ μ μ™Έμ‹ν‚¤κΈ°</i></small>

- νƒ€μ… νλΌλ―Έν„°λ¥Ό λ„μ΄ λ  μ μλ” κ°’μΌλ΅ μ§€μ •ν•  μ μμ
  - μ λ„¤λ¦­ ν΄λμ¤λ‚ ν•¨μλ¥Ό μ •μ ν›„ κ·Έ νƒ€μ…μ„ μΈμ¤ν„΄μ¤ν™”ν•  λ•λ”, λ„μ΄ λ  μ μλ”
    νƒ€μ…μ„ ν¬ν•¨ν•μ—¬ μΉν™ν•  μ μμ
- κΈ°λ³Έμ μΌλ΅, νƒ€μ… νλΌλ―Έν„°λ” `Any?` λ¥Ό μƒκ³„λ΅ ν•λ” νλΌλ―Έν„°μ™€ λ™μΌ

```kotlin
class Processor<T> {
  fun process(value: T)
    value?.hashCode() // value λ” nullable: μ•μ „ν• νΈμ¶μ„ μ‚¬μ©ν•΄μ•Όλ§ ν•¨
  }
}
```

μ •μƒ μ‹¤ν–‰ν• ν•μ‹μ€ λ‹¤μκ³Ό κ°™μ

```kotlin
val nullableStringProcessor = Processor<String?>()
nullableStringProcessor.process(null)
```

- λ„μ΄ λ¶κ°€λ¥ν• νƒ€μ… μ§€μ •μ€ `Any?` λ€μ‹  `Any` λ¥Ό μƒκ³„λ΅ μ‚¬μ©
  - `<T : Any>` λΌλ” μ μ•½μ€ `T` νƒ€μ…μ΄ ν•­μƒ λ„μ΄ λ  μ μ—†λ” νƒ€μ…μ΄ λλ„λ΅ λ³΄μ¥

```kotlin
class Processor<T : Any> {
  fun process(value: T) {
    value.hashCode()    // null λ¶κ°€
  }
}
```

- Nullable μ‚¬μ© μ‹ μ»΄νμΌ μ¤λ¥

```kotlin
Processor<String?>()
// Error: Type argument is not within its bounds: should be subtype of 'Any'
```

<br/>

<table>

#### μλ°”μ™€ μƒνΈμ΄μ©ν•  λ• μ λ„¤λ¦­ νƒ€μ…μ„ 'ν™•μ‹¤ν λ„μ΄ λ  μ μ—†μ' μΌλ΅ ν‘μ‹ν•κΈ°

μλ¥Ό λ“¤μ–΄ λ‹¤μμ μ λ„¤λ¦­ `JBox` μΈν„°νμ΄μ¤

- `put` λ©”μ„λ“μ νƒ€μ… νλΌλ―Έν„°λ΅ **λ„μ΄ λ  μ μ—†λ” `T`** λ§ μ‚¬μ©ν•λ„λ΅ μ μ•½
- λ™μΌν•κ² `T`λ¥Ό μ‚¬μ©ν•λ” `putIfNotNull` λ©”μ„λ“λ” **λ„μ΄ λ  μ μλ” κ°’**μΌλ΅ μ…λ ¥λ°›μ

```kotlin
import org.jetbrains.annotations.NotNull;
public interface JBox<T> {
  /**
   *  λ„μ΄ λ  μ μ—†λ” κ°’μ„ λ°•μ¤μ— λ„£μ
   */
  void put (@NotNull T t);
  /**
   *  λ„ κ°’μ΄ μ•„λ‹ κ²½μ° κ°’μ„ λ°•μ¤μ— λ„£κ³ 
   *  λ„ κ°’μΈ κ²½μ° μ•„λ¬΄κ²ƒλ„ ν•μ§€ μ•μ
   */
  void putIfNotNull(T t);
```

- `T : Any` λ΅ μ ν•ν•λ©΄ `putIfNotNull`μ—μ„ Nullableν•κ² μ‚¬μ©ν•  μ μ—†μ

```kotlin
class KBox<T : Any>: JBox<T> {
  override fun put(t: T) { /* ... */ }
  override fun putIfNotNull(t: T) { /* ERROR */ }
}
```

- μ½”ν‹€λ¦°μ€ **νƒ€μ… μ‚¬μ© μ§€μ **μ—μ„ μ λ€λ΅ λ„μ΄ λ  μ μ—†λ‹¤κ³  ν‘μ‹ν•λ” λ°©λ²•μ„ μ κ³µ
  - β†’ **`T & Any`**

```kotlin
class KBox<T : Any>: JBox<T> {
  override fun put(t: T & Any) { /* ... */ }
  override fun putIfNotNull(t: T) { /* ... */ }
}
```

<br/>

## 11.2 Generics at run time: Erased and reified type parameters

<small><i>μ‹¤ν–‰ μ‹μ  μ λ„¤λ¦­μ¤ λ™μ‘: μ†κ±°λ νƒ€μ… νλΌλ―Έν„°μ™€ μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°</i></small>

- JVMμ μ λ„¤λ¦­μ¤λ” λ³΄ν†µ **νƒ€μ… μ†κ±°**<sup>type erasure</sup>λ΅ κµ¬ν„
- μ‹¤ν–‰ μ‹μ μ— μ λ„¤λ¦­ ν΄λμ¤μ μΈμ¤ν„΄μ¤μ— νƒ€μ… μΈμ μ •λ³΄κ°€ λ“¤μ–΄μμ§€ μ•λ‹¤λ” μλ―Έ
- μ½”ν‹€λ¦°μ—μ„λ” ν•¨μλ¥Ό `inline`μΌλ΅ λ§λ“¤λ©΄ νƒ€μ… μΈμκ°€ μ§€μ›μ§€μ§€ μ•κ² ν•  μ μμ
  - μ΄λ¥Ό 'μ‹¤μ²΄ν™”λλ‹¤'<sup>reified</sup>κ³  ν‘ν„

<br/>

## 11.2.1 Limitations to finding type information of a generic class at run time: Type checks and casts

<small><i>μ‹¤ν–‰ μ‹μ μ— μ λ„¤λ¦­ ν΄λμ¤μ νƒ€μ… μ •λ³΄λ¥Ό μ°Ύμ„ λ• ν•κ³„: νƒ€μ… κ²€μ‚¬μ™€ μΊμ¤ν…</i></small>

- μλ°”μ™€ λ§μ°¬κ°€μ§€λ΅ μ½”ν‹€λ¦° μ λ„¤λ¦­ νƒ€μ… μΈμ μ •λ³΄λ” λ°νƒ€μ„μ— μ§€μ›μ§
- μ λ„¤λ¦­ ν΄λμ¤ μΈμ¤ν„΄μ¤κ°€ κ·Έ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•  λ• μ“°μΈ νƒ€μ… μΈμμ— λ€ν• μ •λ³΄λ¥Ό μ μ§€ν•μ§€ μ•λ”λ‹¤λ” μλ―Έ

```kotlin
val list1: List<String> = listof("a", "b")
val list2: List<Int> = listof(1, 2, 3)
```

- μ»΄νμΌλ¬λ” λ‘ λ¦¬μ¤νΈλ¥Ό μ„λ΅ λ‹¤λ¥Έ νƒ€μ…μΌλ΅ μΈμ‹ν•μ§€λ§ μ‹¤ν–‰ μ‹μ μ— κ·Έ λ‘μ€ μ™„μ „ν κ°™μ

  - μ»΄νμΌλ¬κ°€ μ¬λ°”λ¥Έ νƒ€μ…μ κ°’λ§ κ° λ¦¬μ¤νΈμ— λ„£λ„λ΅ λ³΄μ¥

- νƒ€μ… μΈμλ¥Ό λ”°λ΅ μ €μ¥ν•μ§€μ•κΈ° λ•λ¬Έμ— μ‹¤ν–‰ μ‹μ μ— νƒ€μ… μΈμλ¥Ό κ²€μ‚¬ λ¶κ°€
- `is` κ²€μ‚¬λ¥Ό ν†µν•΄ νƒ€μ… μΈμλ΅ μ§€μ •ν• νƒ€μ…μ„ κ²€μ‚¬ λ¶κ°€

```kotlin
fun printList(l: List<Any>) {
  when (l) {
    is List<String> -> println("Strings: $1")
    is List<Int> -> println("Integers: $1")
  } // Error: Cannot check for an instance of erased type
}
```

- μ‹¤ν–‰ μ‹μ μ List μΈμ νƒ€μ… μ •λ³΄λ” μ§€μ›μ§
- **μ¥μ **: μ €μ¥ν•  νƒ€μ… μ •λ³΄ ν¬κΈ°κ°€ μ¤„μ–΄λ“¦
- **λ‹¨μ **: νƒ€μ… μ •λ³΄λ¥Ό μ• μ μ—†μ

<br/>

> λ² μ΄μ¤ νƒ€μ… (κ°€λ Ή, μ–΄λ–¤ κ°’μ΄ μ§‘ν•©μ΄λ‚ λ§µμ΄ μ•„λ‹λΌ λ¦¬μ¤νΈμΈμ§€)μ κµ¬λ¶„μ€ κ°€λ¥
>
> β†’ μ¤νƒ€ ν”„λ΅μ μ…<sup>star projection</sup>

<br/>

- `as` / `as?` μΊμ¤ν…μ—λ„ μ λ„¤λ¦­ νƒ€μ… κ°€λ¥
- π¨ κΈ°μ € ν΄λμ¤(base class)λ” μΌμΉν•μ§€λ§, νƒ€μ… μΈμκ°€ λ¶μΌμΉν•λ” νƒ€μ…μΌλ΅ μΊμ¤ν…ν•΄λ„ μ—¬μ „ν μΊμ¤ν… μ„±κ³µ
  - μ‹¤ν–‰ μ‹μ μ—λ” μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… μΈμλ¥Ό μ• μ μ—†κΈ° λ•λ¬Έ
  - μ»΄νμΌλ¬κ°€ `unchecked cast`(κ²€μ‚¬ν•  μ μ—†λ” μΊμ¤ν…) κ²½κ³ 

```kotlin
fun printSum(c: Collection<*>) {
  // [warn] Unchecked cast: List<*> to List
  val intList = c as? List<Int>
        ?: throw IllegalArgumentException("List is expected")
}
```

**κ²°κ³Ό:**

```kotlin
printSum(listOf(1, 2, 3)) // 6 (μ •μƒ μ‘λ™)
printSum(setOf(1, 2, 3)) // IllegalArgumentException: List is expected
```

- ν•μ§€λ§, μλ»λ νƒ€μ… μ›μ† λ¦¬μ¤νΈλ¥Ό μ „λ‹¬ν•λ©΄ μ‹¤ν–‰ μ‹μ μ— `ClassCastException` λ°μƒ
- `as?` μΊμ¤ν…μ€ μ„±κ³µν•μ§€λ§ λ¬Έμμ—΄μ„ ν•©ν•  μλ” μ—†μΌλ―€λ΅ λ‚μ¤‘μ— λ‹¤λ¥Έ μμ™Έκ°€ λ°μƒ

```kotlin
printSum(listOf("a", "b", "Ρ"))
// ClassCastException: String cannot be cast to Number
```

λ¬Έμμ—΄ λ¦¬μ¤νΈλ¥Ό printsum ν•¨μμ— μ „λ‹¬ν•λ©΄ λ°μƒν•λ” μμ™Έλ¥Ό μΆ€ λ” μ„¤λ…
μ–΄λ–¤ κ°’μ΄ List<Int>μΈμ§€ κ²€μ‚¬ν•  μλ” μ—†μΌλ―€λ΅ I11egalArgumentExceptionμ΄ λ°μƒν•μ§€
λ” μ•μ. λ”°λΌμ„ as? μΊμ¤νΈκ°€ μ„±κ³µν•κ³  λ¬Έμμ—΄ λ¦¬μ¤νΈμ— λ€ν•΄ Sum ν•¨μκ°€ νΈμ¶
λλ‹¤. sum μ΄ μ‹¤ν–‰λλ” λ„μ¤‘μ— μμ™Έκ°€ λ°μƒν•λ‹¤. sum μ€ Number νƒ€μ…μ κ°’μ„ λ¦¬μ¤νΈ
μ—μ„ κ°€μ Έμ™€ μ„λ΅ λ”ν•λ ¤κ³  μ‹λ„ν•λ‹¤. ν•μ§€λ§ Stringμ„ Number λ΅ μ‚¬μ©ν•λ ¤κ³  ν•λ©΄
μ‹¤ν–‰ μ‹μ μ— ClassCastExceptionμ΄ λ°μƒν•λ‹¤.
μ½”ν‹€λ¦° μ»΄νμΌλ¬λ” μ»΄νμΌ μ‹μ μ— νƒ€μ… μ •λ³΄κ°€ μ£Όμ–΄μ§„ κ²½μ°μ—λ” is κ²€μ‚¬λ¥Ό μν–‰ν•
κ² ν—μ©ν•  μ μμ„ μ •λ„λ΅ λ‘λ‘ν•λ‹¤.
λ¦¬μ¤νΈ 11.6 μ•λ ¤μ§„ νƒ€μ… μΈμλ¥Ό μ‚¬μ©ν•΄ νƒ€μ… κ²€μ‚¬ν•κΈ°
fun printSum(c: Collection<Int>) { when ( c ) {
i s Listβ€ΉInt> -> println("List sum: ${c.sum()}")
i s Set<Int> β†’ > println("Set sum: #{c.sum()}") μ»΄νμΌ μ‹μ μ— μ›μ† νƒ€μ…μ΄ μ•λ ¤μ Έ μμΌλ―€λ΅...
| .β€Ά. μ΄ νƒ€μ… κ²€μ‚¬λ” μ¬λ°”λ¥΄λ‹¤.
fun main() {
printSum listof (1,2,3))
/ / L i s t sum: 6
printSum(setof (3,4,5))
/ / Set sum: 12
486
μ»µνμΌ μ‹μ μ— μ›μ†μ νƒ€μ…μ— λ€ν• μ •λ³΄κ°€ μ—†μ—λ λ¦¬μ¤νΈ 11. 5 μ™€ λ‹¬λ¦¬ λ¦¬μ¤νΈ 11.6
μ—μ„λ” μ»΄νμΌ μ‹μ μ— C μ»¬λ ‰μ… ( λ¦¬μ¤νΈλ‚ κ²°ν•© λ“± μ»¬λ ‰μ… μΆ…λ¥λ” λ¬Έμ κ°€ μ• λλ‹¤μ΄ ITE κ°’μ„ μ €μ¥
ν•λ‹¤λ” μ‚¬μ‹¤μ΄ μ•λ ¤μ Έ μμΌλ―€λ΅ C Listcmts μΈμ§€ κ²€μ‚¬ν•  μ μλ‹¤.
μΌλ°μ μΌλ΅ μ½”ν‹€λ¦° μ»΄νμΌλ¬λ” μ—¬λ¬λ¶„μ—κ² μ–΄λ–¤ κ²€μ‚¬κ°€ μ„ν—ν•κ³  μ–΄λ–¤ κ²€μ‚¬κ°€ κ°€
λ¥ν•μ§€ μ•λ ¤μ£Όκ³ μ μµλ€ν• λ…Έλ ¥ν•λ‹¤ ( μΈμ „ν•μ§€ λ»ν• 1. κ²€μ‚¬λ” κΈμ§€ν•κ³  μ„ν—ν• 5 κ°μ¤ν…μ€ κ²½κ³ λ¥Ό
μ¶λ ¥ν•λ‹¤ , λ”°λΌμ„ μ»΄νμΌλ¬ κ²½κ³ μ μλ―Έμ™€ μ–΄λ–¤ μ—°μ‚°μ΄ μ•μ „ν•μ§€ μ•μ•„μ•Ό ν•λ‹¤.
μ΄λ―Έ μ–ΈκΈ‰ν• κ²ƒμ²λΌ μ½”ν‹€λ¦°μ€ μ λ„¤λ¦­ ν•©μμ λ³Έλ¬Έμ—μ„ κ·Έ ν•¨μμ νƒ€μ… μΈμλ¥Ό κ°€λ¦¬
ν‚¬ μ μλ” νΉλ³„ν• κΈ°λ¥μ„ μ κ³µν•μ§€ μ•λ”λ‹¤. ν•μ§€λ§ inline ν•¨μ μ•μ—μ„λ§ νƒ€μ…
μΈμλ¥Ό μ‚¬μ©ν•  μ μλ‹¤. μ΄μ  κ·Έ κΈ°λ¥μ„ μ‚΄ν΄λ³΄

11.2. 2 μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ” ν•¨μλ” νƒ€μ… μΈμλ¥Ό μ‹¤ν–‰ μ‹μ μ— μ–ΈκΈ‰ν• 
μ μλ‹¤
μ•μ—μ„ μ„¤λ…ν–μ§€λ§ μ½”ν‹€λ¦° μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… μΈμ μ •λ³΄λ” μ‹¤ν–‰ μ‹μ μ— μ§€μ›μ§„λ‹¤.
λ”°λΌμ„ μ λ„¤λ¦­ ν΄λμ¤μ μΈμ¤ν„΄μ¤κ°€ μμ–΄λ„ κ·Έ μΈμ¤ν„΄μ¤λ¥Ό λ§λ“¤ λ• μ‚¬μ©ν• νƒ€μ…
μΈμλ¥Ό μ•μ•„λ‚Ό μ μ—†λ‹¤. μ λ„¤λ¦­ ν•¨μμ νƒ€μ… μΈμλ„ λ§μ°¬κ°€μ§€λ‹¤. μ λ„¤λ¦­ ν•¨μκ°€
νΈμ¶λΌλ„ κ·Έ ν•¨μμ λ³Έλ¬Έμ—μ„λ” νΈμ¶ μ‹ μ“°μΈ νƒ€μ… μΈμλ¥Ό μ• μ μ—†λ‹¤.
fun <T> isA(value: Any) = value i s T
/ / Error: Cannot check f o r instance o f erased type: T
μ΄λ” μΌλ°μ μΌλ΅λ” μ‚¬μ‹¤μ΄λ‹¤. ν•μ§€λ§ μ΄λ° μ μ•½μ„ ν”Όν•  μ μλ” κ²½μ°κ°€ ν•λ‚ μλ‹¤.
μΈλΌμΈ ν•¨μμ νƒ€μ… νλΌλ―Έν„°λ” μ‹¤μ²΄ν™”λλ‹¤. μ΄λ” μ‹¤ν–‰ μ‹μ μ— μΈλΌμΈ ν•¨μμ μ‹¤μ 
νƒ€μ… μΈμλ¥Ό μ• μ μλ‹¤λ” λ»μ΄λ‹¤.
10.2 μ μ—μ„ 1nline ν•¨μλ¥Ό μμ„Έν μ„¤λ…ν–λ‹¤. κΈ°μ–µμ„ λμ‚΄λ¦¬κΈ° μ„ν•΄ κ°„λ‹¨ν•κ² λ‹¤μ‹
μ‚΄ν΄λ³΄μ. μ–΄λ–¤ ν•¨μμ— inline ν‚¤μ›λ“λ¥Ό λ¶™μ΄λ©΄ μ»΄νμΌλ¬λ” κ·Έ ν•¨μλ¥Ό νΈμ¶ν• μ‹μ„
λ¨λ‘ ν•¨μλ¥Ό κµ¬ν„ν•λ” μ½”λ“λ΅ λ°”κΎΌλ‹¤. ν•©μκ°€ λλ‹¤λ¥Ό μΈμλ΅ μ‚¬μ©ν•λ” κ²½μ° κ·Έ ν•¨
11μ¥ μ λ„¤λ¦­μ¤ | 4 8 7
μλ¥Ό μΈλΌμΈ ν•¨μλ΅ λ§λ“¤λ©΄ λλ‹¤ μ½”λ“λ„ ν•¨κ» μΈλΌμ΄λ‹λκ³  κ·Έμ— λ”°λΌ μµλ… ν΄λμ¤
μ™€ κ°μ²΄κ°€ μƒμ„±λμ§€ μ•μ•„μ„ μ„±λ¥μ΄ λ” μΆ‹μ•„μ§ μ μλ‹¤. μ΄λ² μ μ—μ„λ” μΈλΌμΈ ν•¨μ
κ°€ μ μ©ν• λ‹¤λ¥Έ μ΄μ μΈ νƒ€μ… μΈμ μ‹¤μ²΄ν™”λ¥Ό μ„¤λ…ν•λ‹¤.
λ°©κΈ μ‚΄ν΄λ³Έ i5A ν•¨μλ¥Ό μΈλΌμΈ ν•¨μλ΅ λ§λ“¤κ³  νƒ€μ… νλΌλ―Έν„°λ¥Ό reifiedλ΅ μ§€μ •ν•
λ©΄ Value μ νƒ€μ…μ΄ T μ μΈμ¤ν„΄μ¤μΈμ§€λ¥Ό μ‹¤ν–‰ μ‹μ μ— κ²€μ‚¬ν•  μ μλ‹¤.
λ¦¬μ¤νΈ 11.7 μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ” ν•¨μ μ •μν•κΈ°
inline fun < reified Tβ€Ί isA(value: Any) = value i s T μ΄μ λ” μ΄ μ½”λ“κ°€ μ»΄νμΌλλ‹¤.
fun main() {
println(isA<String>("abc"))
/ / true
printin(isA<String> (123))
/ / f a l s e
μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ” λ° μμ–΄ μ΅°κΈμ€ λ»”ν•μ§€ μ•μ€ μλ¥Ό μ‚΄ν΄λ³΄μ.
μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ¥Ό ν™μ©ν•λ” κ°€μ¥ κ°„λ‹¨ν• μμ  μ¤‘ ν•λ‚λ” ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬
ν•¨μμΈ filterisInstanceλ‹¤. μ΄ ν•¨μλ” μΈμλ΅ λ°›μ€ μ»¬λ ‰μ…μ—μ„ μ§€μ •ν• ν΄λμ¤μ
μΈμ¤ν„΄μ¤λ§μ„ λ¨μ•„ λ§λ“  λ¦¬μ¤νΈλ¥Ό λ°ν™ν•λ‹¤. λ‹¤μ μμ λ” filterIsInstance μ‚¬μ©
λ²•μ„ λ³΄μ—¬μ¤€λ‹¤.
λ¦¬μ¤νΈ 11.8 filterisInstance ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬ ν•¨μ μ‚¬μ©ν•κΈ°
fun main() f
val items = listof("one", 2, "three")
printin(items.filterIsInstance<String>())
/ / [one, three]
λ¬Έμμ—΄μ—λ§ κ΄€μ‹¬μ΄ μλ‹¤λ©΄ μ΄ ν•¨μμ νƒ€μ… μΈμλ΅ String μ„ μ§€μ •ν•λ‹¤. κ·Έ κ²½μ° μ΄
4 8 8
ν•¨μμ λ°ν™ νƒ€μ…μ€ List string> μ΄ λ  κ²ƒμ΄λ‹¤. μ—¬κΈ°μ„λ” νƒ€μ… μΈμλ¥Ό μ‹¤ν–‰ μ‹μ μ—
μ•μ μκ³  filterIsInstance λ” κ·Έ νƒ€μ… μΈμλ¥Ό μ‚¬μ©ν•΄ λ¦¬μ¤νΈμ μ›μ† μ¤‘μ— νƒ€μ…μ΄
μΌμΉν•λ” μ›μ†λ§ μ¶”λ ¤λ‚Ό μ μλ‹¤.
λ‹¤μμ€ μ½”ν‹€λ¦° ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬μ— μλ” filterIsinstance μ„ μ–Έμ„ κ°„λ‹¨ν μ •λ¦¬ν–λ‹¤.
λ¦¬μ¤νΈ 11.9 filterisInstanceλ¥Ό κ°„λ‹¨ν•κ² μ •λ¦¬ν• λ²„μ „
inline fun β€Ή reified Tβ€Ί
Iterableβ€Ή\*>.filterIsInstance(): List<T> {
val destination = mutableListOf<T>()
for (element i n this) {
i f (element i s T) {
destination. add (element)
reified ν‚¤μ›λ“λ” μ΄ νƒ€μ… νλΌλ―Έν„°κ°€
μ‹¤ν–‰ μ‹μ μ— μ§€μ›μ§€μ§€ μ•μμ„ ν‘μ‹ν•λ‹¤.
κ° μ›μ†κ°€ νƒ€μ… μΈμλ΅ μ§€μ •ν• ν΄λμ¤μ
μΈμ¤ν„΄μ¤μΈμ§€ κ²€μ‚¬ν•  μ μλ‹¤.
return destination
μΈλΌμΈ ν•¨μμ—μ„λ§ μ‹¤μ²΄ν™”λ νƒ€μ… μΈμλ¥Ό μ“Έ μ μλ” μ΄μ 
κ·Έλ ‡λ‹¤λ©΄ μ‹¤μ²΄ν™”λ νƒ€μ… μΈμλ” μ–΄λ–»κ² μ‘λ™ν•λ” κ±ΈκΉ? μ™ μΌλ° ν•¨μμ—μ„λ” element is T λ¥Ό μ“Έ μ
μ—†κ³  μΈλΌμΈ ν•¨μμ—μ„λ§ μ“Έ μ μλ” κ±ΈκΉ?
10.2 μ μ—μ„ μ„¤λ…ν–μ§€λ§ μ»΄νμΌλ¬λ” μΈλΌμΈ ν•¨μμ λ³Έλ¬Έμ„ κµ¬ν„ν• λ°”μ΄νΈμ½”λ“λ¥Ό κ·Έ ν•¨μκ°€ νΈμ¶λλ”
λ¨λ“  μ§€μ μ— μ‚½μ…ν•λ‹¤. μ»΄νμΌλ¬λ” μ‹¤μ²΄ν™”λ νƒ€μ… μΈμλ¥Ό μ‚¬μ©ν•΄ μΈλΌμΈ ν•¨μλ¥Ό νΈμ¶ν•λ” κ° λ¶€λ¶„μ
μ •ν™•ν• νƒ€μ… μΈμλ¥Ό μ• μ μλ‹¤. λ”°λΌμ„ μ»΄νμΌλ¬λ” νƒ€μ… μΈμλ΅ μ“°μΈ κµ¬μ²΄μ μΈ ν΄λμ¤λ¥Ό μ°Έμ΅°ν•λ”
λ°”μ΄νΈμ½”λ“λ¥Ό μƒμ„±ν•΄ μ‚½μ…ν•  μ μλ‹¤. κ²°κ³Όμ μΌλ΅ λ¦¬μ¤νΈ 11.8 μ filterIsInstance string> νΈμ¶
μ€ λ‹¤μκ³Ό λ™λ“±ν• μ½”λ“λ¥Ό λ§λ“¤μ–΄λ‚Έλ‹¤.
for (element i n t h i s ) {
i f (element i s String) 1
destination. add (element)
κµ¬μ²΄μ μΈ ν΄λμ¤λ¥Ό μ°Έμ΅°ν•λ‹¤.
11μ¥ μ λ„¤λ¦­μ¤ | 4 8 9
λ§λ“¤μ–΄μ§„ λ°”μ΄νΈμ½”λ“λ” νƒ€μ… νλΌλ―Έν„°κ°€ μ•„λ‹λΌ κµ¬μ²΄μ μΈ νƒ€μ…μ„ μ‚¬μ©ν•λ―€λ΅ μ‹¤ν–‰ μ‹μ μ— λ²μ–΄μ§€λ”
νƒ€μ… μ†κ±°μ μν–¥μ„ λ°›μ§€ μ•λ”λ‹¤.
μλ°” μ½”λ“μ—μ„λ” reified νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ” 1nline ν•¨μλ¥Ό νΈμ¶ν•  μ μ—†λ‹¤λ” μ μ„ κΈ°μ–µν•
μ. μλ°”μ—μ„λ” μ½”ν‹€λ¦° μΈλΌμΈ ν•¨μλ¥Ό λ‹¤λ¥Έ λ³΄ν†µ ν•¨μμ²λΌ νΈμ¶ν•λ‹¤. κ·Έλ° κ²½μ° μΈλΌμΈ ν•¨μλ¥Ό νΈμ¶ν•΄
λ„ μ‹¤μ λ΅ μΈλΌμ΄λ‹μ΄ λμ§€λ” μ•λ”λ‹¤. μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°κ°€ μλ” ν•¨μμ κ²½μ° νƒ€μ… μΈμ κ°’μ„
λ°”μ΄νΈμ½”λ“μ— λ„£κΈ° μ„ν•΄ λ” λ§μ€ μ‘μ—…μ΄ ν•„μ”ν•λ‹¤. λ”°λΌμ„ μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°κ°€ μλ” μΈλΌμ΄λ‹
ν•¨μλ¥Ό μΌλ° μμ²λΌ μλ°”μ—μ„ νΈμ¶ν•  μλ” μ—†λ‹¤.
μΈλΌμΈ ν•¨μμ—λ” μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°κ°€ μ—¬λΏ μκ±°λ‚ μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°
μ™€ μ‹¤μ²΄ν™”ν•μ§€ μ•μ€ νƒ€μ… νλΌλ―Έν„°κ°€ ν•¨κ» μμ„ μλ„ μλ‹¤. λλ‹¤λ¥Ό νλΌλ―Έν„°λ΅ λ°›
μ§€ μ•μ§€λ§ filterisInstanceλ¥Ό μΈλΌμΈ ν•¨μλ΅ μ •μν–λ‹¤λ” μ μ— μ μν•μ. 10.2.4 μ 
μ—μ„ ν•¨μμ νλΌλ―Έν„° μ¤‘μ— ν•¨μ νƒ€μ…μΈ νλΌλ―Έν„°κ°€ μκ³  κ·Έ νλΌλ―Έν„°μ— ν•΄λ‹Ήν•λ”
μΈμ( λ€) λ¥Ό ν•¨κ» μΈλΌμ΄λ‹ν•¨μΌλ΅μ¨ μ–»λ” μ΄μµμ΄ λ” ν° κ²½μ°μ—λ§ ν•¨μλ¥Ό μΈλΌμΈ ν•¨
μλ΅ λ§λ“¤λΌκ³  ν–λ‹¤. ν•μ§€λ§ μ΄ κ²½μ°μ—λ” ν•¨μλ¥Ό Inl1neμΌλ΅ λ§λ“λ” μ΄μ κ°€ μ„±λ¥
ν–¥μƒμ΄ μ•„λ‹λΌ μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•κΈ° μ„ν•¨μ΄λ‹¤.
μ„±λ¥μ„ μΆ‹κ² ν•λ ¤λ©΄ μΈλΌμΈ ν•¨μμ ν¬κΈ°λ¥Ό κ³„μ† κ΄€μ°°ν•΄μ•Ό ν•λ‹¤. ν•¨μκ°€ μ»¤μ§€λ©΄ μ‹¤
μ²΄ν™”λ νƒ€μ…μ— μμ΅΄ν•μ§€ μ•λ” λ¶€λ¶„μ„ λ³„λ„μ μΌλ° ν•¨μλ΅ λ½‘μ•„λ‚΄λ” νΈμ΄ λ‚«λ‹¤.
11.2.3 ν΄λμ¤ μ°Έμ΅°λ¥Ό μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ΅ λ€μ‹ ν•¨μΌλ΅μ¨ java.lang.Class νλΌ
λ―Έν„° ν”Όν•κΈ°
java.lang.Class νƒ€μ… μΈμλ¥Ό νλΌλ―Έν„°λ΅ λ°›λ” API μ— λ€ν• μ½”ν‹€λ¦° μ–΄λ‘ν„°λ¥Ό κµ¬μ¶•
ν•λ” κ²½μ° μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ¥Ό μμ£Ό μ‚¬μ©ν•λ‹¤. κ·Έλ° API μ μλ΅λ” JDK μ
ServiceLoader κ°€ μλ‹¤. Serviceloaderλ” μ–΄λ–¤ μ¶”μƒ ν΄λμ¤λ‚ μΈν„°νμ΄μ¤λ¥Ό ν‘ν„ν•
λ” Java.langβ€ΆClassλ¥Ό λ°›μ•„ κ·Έ ν΄λμ¤λ‚ μΈμ¤ν„΄μ¤λ¥Ό κµ¬ν„ν• μΈμ¤ν„΄μ¤λ¥Ό λ°ν™ν•λ‹¤.
μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ¥Ό ν™μ©ν•΄ μ΄λ° API λ¥Ό μ‰½κ² νΈμ¶ν•  μ μλ„λ΅ λ§λ“λ” λ°©λ²•
μ„ μ‚΄ν΄λ³΄μ.
4 9 0
ν‘μ¤€ μλ°” AP μΈ ServiceLoader λ¥Ό μ‚¬μ©ν•΄ μ„λΉ„μ¤λ¥Ό μ½μ–΄ λ“¤μ΄λ ¤λ©΄ λ‹¤μ μ½”λ“μ²λΌ
νΈμ¶ν•΄μ•Ό ν•λ‹¤.
val serviceImp1 = ServiceLoader. load(Service:: class. java)
: cass. Java κµ¬λ¬Έμ€ μ½”ν‹€λ¦° ν΄λμ¤μ— λ€μ‘ν•λ” Java, 1ang. chass μ°Έμ΅°λ¥Ό μ–»λ” λ°©
λ²•μ„ λ³΄μ—¬μ¤€λ‹¤. Service: class.JavaλΌλ” μ½”λ“λ” Service.class λΌλ” μλ°” μ½”λ“μ™€
μ™„μ „ν κ°™λ‹¤. μ΄λ” 12.2 μ μ—μ„ λ¦¬ν”λ ‰μ…μ„ μ„¤λ…ν•  λ• λ” μμ„Έν λ‹¤λ£¬λ‹¤.
μ΄ μμ λ¥Ό μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•΄ μ„λΉ„μ¤κ°€ μ½μ„ ν΄λμ¤λ¥Ό 1oadService
μ νƒ€μ… νλΌλ―Έν„°λ΅ μ§€μ •ν•΄ λ‹¤μ‹ μ‘μ„±ν•μ.
val serviceImpl = loadService<Service>()
ν›¨μ”¬ μ§§λ‹¤. μ΄μ λ” μ½μ–΄ λ“¤μΌ μ„λΉ„μ¤ ν΄λμ¤λ¥Ό 1oadservice ν•¨μμ νƒ€μ… μΈμλ΅
μ§€μ •ν•λ‹¤. ν΄λμ¤λ¥Ό νƒ€μ… μΈμλ΅ μ§€μ •ν•λ©΄ ::class.javaλΌκ³  μ“°λ” κ²½μ°λ³΄λ‹¤ ν›¨μ”¬
λ” μ½κ³  μ΄ν•΄ν•κΈ° μ‰½λ‹¤.
μ΄μ  loadService ν•¨μλ¥Ό μ–΄λ–»κ² μ •μν•  μ μλ”μ§€ μ‚΄ν΄λ³΄μ.
inline fun β€Ή reified T> l o a d S e r v i c e 1
return ServiceLoader. load (T:: class. java)
β€Ά νƒ€μ… νλΌλ―Έν„°λ¥Ό reiiedλ΅ ν‘μ‹ν•λ‹¤.
T:classλ΅ νƒ€μ… νλΌλ―Έν„°μ ν΄λμ¤λ¥Ό κ°€μ Έμ¨λ‹¤.
}
μΌλ° ν΄λμ¤μ— μ‚¬μ©ν•  μ μλ” ::class.java κµ¬λ¬Έμ„ μ΄ κ²½μ°μ—λ„ μ‚¬μ©ν•  μ μλ‹¤.
μ΄λ¥Ό ν†µν•΄ νƒ€μ… νλΌλ―Έν„°λ΅ μ§€μ •λ ν΄λμ¤μ— λ”°λ¥Έ java.lang.Classλ¥Ό μ–»μ„ μ μκ³ 
κ·Έλ ‡κ² μ–»μ€ ν΄λμ¤ μ°Έμ΅°λ¥Ό λ³΄ν†µ λ•μ™€ λ§μ°¬κ°€μ§€λ΅ μ‚¬μ©ν•  μ μλ‹¤.
μ•λ“λ΅μ΄λ“μ startActivity ν•¨μ κ°„λ‹¨ν•κ² λ§λ“¤κΈ°
μ•λ“λ΅μ΄λ“ κ°λ°μλΌλ©΄ μµμ™ν• λ‹¤λ¥Έ μμ λ¥Ό μ°Ύμ„ μ μλ‹¤. μ•΅ν‹°λΉ„ν‹°λ¥Ό ν‘μ‹ν•λ” κ³Όμ •μ΄ κ·Έλ° μλ‹¤.
μ•΅ν‹°λΉ„ν‹°μ ν΄λμ¤λ¥Ό java.1ang.classλ΅ μ „λ‹¬ν•λ” λ€μ‹  μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.
11μ¥ μ λ„¤λ¦­μ¤ | 491
i n l i n e f u n β€Ή r e i f i e d T : A c t i v i t y >

- νƒ€μ… νλΌλ―Έν„°λ¥Ό reiledλ΅ ν‘μ‹ν•λ‹¤.
  Context. startActivity) {
  val intent = Intent (this, T::class.java) <
  startActivity(intent)
- T:cassλ΅ νƒ€μ… νλΌλ―Έν„°μ ν΄λμ¤λ¥Ό κ°€μ Έμ¨λ‹¤.
  startActivityβ€ΉDetailActivity> <
- μ•΅ν‹°λΉ„ν‹°λ¥Ό ν‘μ‹ν•λ” λ©”μ„λ“λ¥Ό νΈμ¶ν•λ‹¤.
  11.2.4 μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°κ°€ μλ” μ ‘κ·Όμ μ •μ
  μΈλΌμΈκ³Ό μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•  μ μλ” μ½”ν‹€λ¦° κµ¬μ„± μ”μ†κ°€ ν•¨μλ§
  μλ” κ²ƒμ€ μ•„λ‹λ‹¤. 2.2.2 μ μ—μ„ μ‚΄ν΄λ³Έ κ²ƒμ²λΌ ν”„λ΅νΌν‹° μ ‘κ·Όμμ— λ€ν•΄ κ²ν„°μ™€ μ„Έ
  ν„°μ μ»¤μ¤ν…€ κµ¬ν„μ„ λ§λ“¤ μ μλ‹¤. μ λ„¤λ¦­ νƒ€μ…μ— λ€ν•΄ ν”„λ΅νΌν‹° μ ‘κ·Όμλ¥Ό μ •μν•
  λ” κ²½μ° ν”„λ΅νΌν‹°λ¥Ό inlineμΌλ΅ ν‘μ‹ν•κ³  νƒ€μ… νλΌλ―Έν„°λ¥Ό reifiedλ΅ ν•λ©΄ νƒ€μ…
  μΈμμ— μ“°μΈ κµ¬μ²΄μ μΈ ν΄λμ¤λ¥Ό μ°Έμ΅°ν•  μ μλ‹¤.
  λ‹¤μ μμ λ” canonical μ΄λΌλ” ν™•μ¥ ν”„λ΅νΌν‹°λ¥Ό λ§λ“ λ‹¤. μ΄ ν”„λ΅νΌν‹°λ” μ λ„¤λ¦­ ν΄λ
  μ¤μ ν‘μ¤€μ μΈ μ΄λ¦„μ„ λ°ν™ν•λ‹¤. 11.2.3μ κ³Ό λ§μ°¬κ°€μ§€λ΅ μ΄ μμ λ„ T::class.java
  νΈμ¶μ„ κ°μ‹Έμ„ CanonicalName ν”„λ΅νΌν‹°λ¥Ό λ” μ‰½κ² μ‚¬μ©ν•  μ μλ” λ°©λ²•μ„ μ κ³µ
  ν•λ‹¤.
  inline val β€Ή reified Tβ€Ί T.canonical: String
  g e t ) = T: :class.java.canonicalName
  fun main () {
  printin(listof(1, 2, 3). canonical)
  / / java.util.List
  printin (1. canonical)
  / / java.lang. Integer
