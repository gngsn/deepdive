# APPENDIX B. νƒ€μ… κ³„μΈµμ κµ¬ν„

<br/>

**TL;DR**

- νƒ€μ… κ³„μΈµμ„ κµ¬ν„ν•λ” λ™μ‹μ— λ‹¤ν•μ„±μ„ κµ¬ν„ν•λ” λ°©λ²•μ„
- νƒ€μ… κ³„μΈµμ„ κµ¬ν„ν•λ‹¤κ³  ν•΄μ„, μ„λΈνƒ€μ΄ν•‘ κ΄€κ³„κ°€ λ³΄μ¥λλ” κ²ƒμ€ μ•„λ‹
  - μ¬λ°”λ¥Έ νƒ€μ… κ³„μΈµ: λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™μ„ μ¤€μ (λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™μ„ μ¤€μν•λ” μ±…μ„μ€ λ³ΈμΈμ—κ² μμ, _13μ¥_.)
- κ°μ²΄μ§€ν–¥ μ–Έμ–΄μ—μ„ ν΄λμ¤λ¥Ό **μ‚¬μ©μ μ •μ νƒ€μ… (user-defined data type)** μ΄λΌκ³  λ¶€λ¦„
  - νƒ€μ…μ€ κ°μ²΄μ νΌλΈ”λ¦­ μΈν„°νμ΄μ¤ - κ²°κ³Όμ μΌλ΅ ν΄λμ¤λ” **κ°μ²΄μ νƒ€μ…κ³Ό κµ¬ν„μ„ λ™μ‹μ— μ •μν•λ” κ²ƒ**
- **μΈν„°νμ΄μ¤ μƒμ†**μ μ¥μ  (β†” ν΄λμ¤ μƒμ†)
  1. _λ‹¤μ¤‘ μƒμ†μ λ”λ λ§μ— λΉ μ§€μ§€ μ•μ„ μ μμ_ 
  2. _λ‹¨μΌ μƒμ† κ³„μΈµμΌλ΅ μΈν• κ²°ν•©λ„ λ¬Έμ λ„ ν”Όν•  μ μμ_
- **κ³¨κ²© κµ¬ν„ μ¶”μƒ ν΄λμ¤( skeletal implementation abstract class )**
  - μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν•΄ νƒ€μ…μ„ μ •μν•λ©΄ **λ‹¤μ¤‘ μƒμ† λ¬Έμ λ¥Ό ν•΄κ²°**ν•  μ μμ§€λ§ **μ¤‘λ³µ μ½”λ“λ¥Ό μ κ±°ν•κΈ° μ–΄λ ¤μ›€**
  - **μ¶”μƒ ν΄λμ¤**: **νƒ€μ…μ„ μ •μ**ν•λ©΄μ„ **μ½”λ“ μ¤‘λ³µμ„ λ°©μ§€**ν•λ„λ΅ μ •μ
**μΈν„°νμ΄μ¤μ™€ μ¶”μ‹±ν΄λμ¤λ¥Ό κ²°ν•©ν•μ—¬ νƒ€μ…μ„ μ •μν•  λ•μ μ¥μ **
  - λ‹¤μ–‘ν• κµ¬ν„ λ°©λ²•μ΄ ν•„μ”ν•  κ²½μ° μƒλ΅μ΄ μ¶”μƒ ν΄λμ¤λ¥Ό μ¶”κ°€ν•΄μ„ μ‰½κ² ν•΄κ²° κ°€λ¥.
  - λ¶€λ¨ ν΄λμ¤κ°€ μ΄λ―Έ μμ–΄λ„, μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μƒλ΅μ΄ νƒ€μ…μΌλ΅ μ‰½κ² ν™•μ¥ κ°€λ¥.
- μ„¤κ³„κ°€ λ³µμ΅ν•  κ²½μ° (μƒμ† κ³„μΈµμ— μ–½λ§¤μ΄μ§€ μ•λ” νƒ€μ… κ³„μΈµμ„ μ”κµ¬ν•λ‹¤λ©΄):
 - μΈν„°νμ΄μ¤λ΅ νƒ€μ…μ„ μ •μν•κ³ , μ¶”μƒ ν΄λμ¤λ΅ κΈ°λ³Έ κµ¬ν„μ„ μ κ³µν•΄μ„ μ¤‘λ³µ μ½”λ“λ¥Ό μ κ±°ν•λΌ
   - λ³µμ΅ν•μ§€ μ•λ‹¤λ©΄: μΈν„°νμ΄μ¤λ‚ μ¶”μƒ ν΄λμ¤ λ‘ μ¤‘ ν•λ‚λ§ μ‚¬μ©
- **λ• νƒ€μ΄ν•‘**
  - μ–΄λ–¤ λ€μƒμ **ν–‰λ™**μ΄ μ¤λ¦¬μ™€ κ°™λ‹¤λ©΄ κ·Έκ²ƒμ„ μ¤λ¦¬λΌλ” νƒ€μ…μΌλ΅ μ·¨κΈ‰ν•΄λ„ λ¬΄λ°©ν•λ‹¤λ” κ²ƒ
- **λ””ν΄νΈ λ©”μ„λ“( default method )**
  - **μλ°”μ—μ„ λ―Ήμ¤μΈμ„ κµ¬ν„ν•  μ μλ” κΈ°λ¥**
  - μΈν„°νμ΄μ¤μ— λ©”μ„λ“μ κΈ°λ³Έ κµ¬ν„μ„ μ¶”κ°€ν•λ” κ²ƒμ„ ν—μ©
  - 'μ¶”μƒ ν΄λμ¤κ°€ μ κ³µν•λ” μ½”λ“ μ¬μ‚¬μ©μ„± + νΉμ •ν• μƒμ† κ³„μΈµμ— μ–½λ§¤μ΄μ§€ μ•λ” μΈν„°νμ΄μ¤'μ μ¥μ  μ μ§€
- **λ””ν΄νΈ λ©”μ„λ“κ°€ κ°€μ§€λ” ν•κ³„**
  - λ””ν΄νΈ λ©”μ„λ“μ—μ„ νΈμ¶ν•λ” λ©”μ„λ“λ“¤μ΄ μΈν„°νμ΄μ¤μ— μ •μλμ–΄ μμ β†’ ν΄λμ¤ μ•μ—μ„ **νΌλΈ”λ¦­ λ©”μ„λ“**λ΅ κµ¬ν„ν•΄μ•Ό ν•¨

<br/>

---

<br/>

- λ§μ€ μ‚¬λλ“¤μ΄ κ°–κ³  μλ” ν”ν• μ¤ν•΄λ” νƒ€μ…κ³Ό ν΄λμ¤κ°€ λ™μΌν• κ°λ…μ΄λΌλ” κ²ƒ
  - νƒ€μ…: κ°λ…μ λ¶„λ¥
  - ν΄λμ¤: νƒ€μ…μ„ κµ¬ν„ν•λ” ν• κ°€μ§€ λ°©λ²•

- μ΄λ² μ¥μ„ μ½μ„ λ• μ—Όλ‘ν•  λ‘ κ°€μ§€ μ‚¬ν•­
  1. ν•΄λ‹Ή μ¥μ λ¨λ“  λ°©λ²•μ€ **νƒ€μ… κ³„μΈµμ„ κµ¬ν„ν•λ” λ°©λ²•μΈ λ™μ‹μ— λ‹¤ν•μ„±μ„ κµ¬ν„ν•λ” λ°©λ²•**
     - νƒ€μ… κ³„μΈµμ€ λ™μΌν• λ©”μ‹μ§€μ— λ€ν• ν–‰λ™ νΈν™μ„±μ„ μ „μ λ΅ ν•κΈ° λ•λ¬Έ 
     - κ³µν†µμ μΌλ΅ μνΌνƒ€μ…μ— λ€ν•΄ μ „μ†΅ν• λ©”μ‹μ§€λ¥Ό μ„λΈνƒ€μ…λ³„λ΅ λ‹¤λ¥΄κ² μ²λ¦¬ν•  μ μλ” λ°©λ²•μ„ μ κ³µν•λ”λ°, μ΄ λ°©λ²•λ“¤μ€ 12μ¥μ—μ„ μ„¤λ…ν• λ™μ  λ©”μ„λ“ νƒμƒ‰κ³Ό μ μ‚¬ν• λ°©μ‹μ„ μ΄μ©ν•΄ μ μ ν• λ©”μ„λ“λ¥Ό κ²€μƒ‰ν•  κ²ƒμ„.
  2. ν•΄λ‹Ή μ¥μ λ°©λ²•μ„ μ΄μ©ν•΄ νƒ€μ… κ³„μΈµμ„ κµ¬ν„ν•λ‹¤κ³  ν•΄μ„, μ„λΈνƒ€μ΄ν•‘ κ΄€κ³„κ°€ λ³΄μ¥λλ” κ²ƒμ€ μ•„λ‹ 
     - μ¬λ°”λ¥Έ νƒ€μ… κ³„μΈµμ΄ λκΈ° μ„ν•΄μ„λ” μ„λΈνƒ€μ…μ΄ μνΌνƒ€μ…μ„ λ€μ²΄ν•  μ μλ„λ΅ **λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™μ„ μ¤€μ**ν•΄μ•Ό ν•¨ (13μ¥ μ°Έκ³ ) 
     - νƒ€μ… μ‚¬μ΄μ— λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™μ„ μ¤€μν•λ„λ΅ λ§λ“λ” μ±…μ„μ€ λ³ΈμΈμ—κ² μμ.

<br/>

### ν΄λμ¤λ¥Ό μ΄μ©ν• νƒ€μ… κ³„μΈµ κµ¬ν„

β”οΈνƒ€μ…μ€ **κ°μ²΄μ νΌλΈ”λ¦­ μΈν„°νμ΄μ¤**λ¥Ό κ°€λ¦¬ν‚¤κΈ° λ•λ¬Έμ— κ²°κ³Όμ μΌλ΅ ν΄λμ¤λ” κ°μ²΄μ νƒ€μ…κ³Ό κµ¬ν„μ„ λ™μ‹μ— μ •μν•λ” κ²ƒκ³Ό κ°™μ 

- `com.gngsn.phone.Phone`κ³Ό `com.gngsn.phone.NightlyDiscountPhone` μ½”λ“ μƒμ†κ΄€κ³„ μμ‹

β†’ κ°μ²΄μ§€ν–¥ μ–Έμ–΄μ—μ„ ν΄λμ¤λ¥Ό <b>μ‚¬μ©μ μ •μ νƒ€μ… (user-defined data type)</b>μ΄λΌκ³  λ¶€λ¥΄λ” μ΄μ 

<br/>

- νΌλΈ”λ¦­ μΈν„°νμ΄μ¤λ” μ μ§€ν•λ©΄μ„ μƒλ΅μ΄ κµ¬ν„μ„ κ°€μ§„ κ°μ²΄λ¥Ό μ¶”κ°€ν•  μ μλ” κ°€μ¥ κ°„λ‹¨ν• λ°©λ²• β†’ **μƒμ†**
- **ν΄λμ¤**λ” νƒ€μ…μ„ κµ¬ν„ν•  μ μλ” λ‹¤μ–‘ν• λ°©λ²• μ¤‘ ν•λ‚μΌ λΏ

<br/>

### μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν• νƒ€μ… κ³„μΈµ κµ¬ν„

Example. κ°„λ‹¨ν• κ²μ„μ„ κ°λ°ν•κ³  μλ¦„

<br/><img src="./image/imageB1.png" alt="" width="60%" /><br/>

- Sound νƒ€μ…: Effect νƒ€μ…μ μ„λΈνƒ€μ… β†’ Effect ν΄λμ¤λ¥Ό μƒμ†λ°›μ
- Explosion νƒ€μ…: Effect νƒ€μ…μΈ λ™μ‹μ— Displyable νƒ€μ… β†’ Effect ν΄λμ¤μ™€ Displayable ν΄λμ¤λ¥Ό λ™μ‹μ— μƒμ†
  - λ‹¤μ¤‘ μƒμ† β†’ λ€λ¶€λ¶„μ μ–Έμ–΄λ“¤μ΄ λ‹¤μ¤‘ μƒμ†μ„ μ§€μ›ν•μ§€ μ•μ

<br/><img src="./image/imageB2.png" alt="" width="60%" /><br/>

- 'μƒμ†μΌλ΅ μΈν• κ²°ν•©λ„ λ¬Έμ  + λ‹¤μ¤‘ μƒμ†μ΄λΌλ” κµ¬ν„ μ μ•½'μ„ ν•΄κ²°ν•  μ μλ” λ°©λ²• β†’ **μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©**

<br/>

#### GameObject _interface_

```java
public interface GameObject {
    String getName();
}
```

<br/>

#### Displayable _interface_

- `GameObject` νƒ€μ…: κ²μ„μ λ§μ€ μ”μ†λ“¤μ€ ν™”λ©΄μ— ν‘μ‹λ  ν•„μ”κ°€ μμ
- μ΄ κ°μ²΄λ“¤μ€ ν™”λ©΄ ν‘μ‹λΌλ” λ™μΌν• ν–‰λ™μ„ μ κ³µν•κΈ° λ•λ¬Έμ— λ³„λ„ μ νƒ€μ…μΌλ΅ λ¶„λ¥λΌμ•Ό ν•¨ β†’ `Displyable` νƒ€μ…

```java
/**
 *  Displayable νƒ€μ…μ„ GameObject νƒ€μ…μ μ„λΈνƒ€μ…μΌλ΅ μ •μ
 */
public interface Displayable extends GameObject { 
    Point getPosition();
    void update(Graphics graphics);
}
```

<br/>

#### Collidable _interface_

- λ‹¤λ¥Έ μ”μ†λ“¤κ³Όμ **μ¶©λλ΅ μΈν•΄ μ΄λ™μ— μ μ•½**μ„ λ°›κ±°λ‚ **ν”Όν•΄**λ¥Ό μ…λ” λ“±μ μ²λ¦¬κ°€ ν•„μ”ν• κ°μ²΄λ¥Ό μ„ν• Collidable νƒ€μ… μ •μ
- μ¶©λ μ²΄ν¬λ¥Ό μ„ν• collideWith μ¤νΌλ μ΄μ…μ„ μ¶”κ°€
 
```java
public interface Collidable extends Displayable {
    boolean collideWith(Collidable other);
}
```

<br/>

#### Effect

- ν™”λ©΄μ— ν‘μ‹λμ§€ μ•λ”λΌλ„ κ²μ„μ— λ‹¤μ–‘ν• ν¨κ³Όλ¥Ό λ¶€μ—¬ν•  μ μλ” λ¶€κ°€μ μΈ μ”μ†λ¥Ό μ„ν• `Effect` νƒ€μ… μ •μ
- 
```java
public interface Effect extends GameObject {
    void activate();
}
```

- `Player`λ” ν™”λ©΄μ— ν‘μ‹λΌμ•Ό ν• λΏλ§ μ•„λ‹λΌ ν™”λ©΄ μƒμ— ν‘ν„λ λ‹¤λ¥Έ κ°μ²΄λ“¤κ³Όμ μ¶©λμ„ μ²΄ν¬ν•΄μ•Ό ν•¨
- `Collidable`  νƒ€μ…μ΄ μ •μν• ν–‰λ™μ„ μ κ³µ


-> **μΈν„°νμ΄μ¤**μ™€ **ν΄λμ¤**λ¥Ό ν•¨κ» μ΅°ν•©ν•λ©΄ _β‘  λ‹¤μ¤‘ μƒμ†μ λ”λ λ§μ— λΉ μ§€μ§€ μ•μ„ μ μκ³ _ _β‘΅ λ‹¨μΌ μƒμ† κ³„μΈµμΌλ΅ μΈν• κ²°ν•©λ„ λ¬Έμ λ„ ν”Όν•  μ μμ_

<br/>

#### νƒ€μ… κµ¬ν„μ„ ν†µν• μ¥μ 

<br/><img src="./image/imageB3.png" alt="" width="70%" /><br/>

#### 1. μ—¬λ¬ ν΄λμ¤κ°€ λ™μΌν• νƒ€μ…μ„ κµ¬ν„ν•  μ μμ

- `Player` μ™€ `Monster` ν΄λμ¤λ” μ„λ΅ λ‹¤λ¥Έ ν΄λμ¤μ§€λ§, μ΄ λ‘ ν΄λμ¤μ μΈμ¤ν„΄μ¤λ“¤μ€ `Collidable` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•κ³  μκΈ° λ•λ¬Έμ— λ™μΌν• λ©”μ‹μ§€μ— μ‘λ‹µν•  μ μμ.
- μ„λ΅ λ‹¤λ¥Έ ν΄λμ¤λ¥Ό μ΄μ©ν•΄μ„ κµ¬ν„λμ§€λ§ νƒ€μ…μ€ λ™μΌ

#### 2. ν•λ‚μ ν΄λμ¤κ°€ μ—¬λ¬ νƒ€μ…μ„ κµ¬ν„ν•  μ μλ‹¤

- `Explosion` μ μΈμ¤ν„΄μ¤λ” Displayable μΈν„°νμ΄μ¤μ™€ λ™μ‹μ— Effect μΈν„°νμ΄μ¤λ„ κµ¬ν„ ν•¨ 
- `Explosion` μ μΈμ¤ν„΄μ¤λ” Displayable νƒ€μ…μΈ λ™μ‹μ— Effect νƒ€μ…μ΄κΈ°λ„ ν•¨

<br/>

π“ μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν•΄ νƒ€μ…μ„ μ •μν•κ³  ν΄λμ¤λ¥Ό μ΄μ©ν•΄ κ°μ²΄λ¥Ό κµ¬ν„ν•λ©΄ ν΄λμ¤ μƒμ†μ„ μ‚¬μ©ν•μ§€ μ•κ³ λ„ νƒ€μ… κ³„μΈµμ„ κµ¬ν„ν•  μ μμ

<br/>

### μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν• νƒ€μ… κ³„μΈµ κµ¬ν„

#### κµ¬μ²΄ ν΄λμ¤μ νƒ€μ… μƒμ† vs μ¶”μƒ ν΄λμ¤ νƒ€μ… μƒμ†
1. μ²« λ²μ§Έ, μμ΅΄ν•λ” λ€μƒμ μ¶”μƒν™” μ •λ„
   - κµ¬μ²΄ ν΄λμ¤ μƒμ†: κµ¬μ²΄μ μΈ λ‚΄λ¶€ κµ¬ν„μ— κ°•ν•κ² κ²°ν•© (λ¶€λ¨ ν΄λμ¤κ°€ λ³€κ²½λλ©΄ μμ‹ ν΄λμ¤λ„ λ³€κ²½λ  κ°€λ¥μ„±μ΄ νΌ)
   - μ¶”μƒ ν΄λμ¤ μƒμ†: λ‚΄λ¶€ κµ¬ν„μ΄ μ•„λ‹ μ¶”μƒ λ©”μ„λ“μ μ‹κ·Έλ‹μ²μ—λ§ μμ΅΄
   - **β­οΈ λ¨λ“  κµ¬μ²΄ ν΄λμ¤μ λ¶€λ¨ γ…–ν΄λμ¤λ¥Ό ν•­μƒ μ¶”μƒ ν΄λμ¤λ΅ λ§λ“¤κΈ° μ„ν•΄ λ…Έλ ¥ν•λΌ.**
2. λ‘ λ²μ§Έ, μƒμ†μ„ μ‚¬μ©ν•λ” μλ„
   - `Phone` ν΄λμ¤μ κ²½μ° μμ‹ ν΄λμ¤μΈ `NightlyDiscountPhone` μ `calculateFee` λ©”μ„λ“κ°€ λ¶€λ¨ ν΄λμ¤μΈ Phoneμ `calculateFee` λ©”μ„λ“μ κµ¬μ²΄μ μΈ λ‚΄λ¶€ κµ¬ν„μ— κ°•ν•κ² κ²°ν•©
   - `Phone` ν΄λμ¤κ°€ λ³€κ²½λ  κ²½μ° μμ‹ ν΄λμ¤μΈ `NightlyDiscountPhone` λ„ ν•¨κ» λ³€κ²½λ  κ°€λ¥μ„±μ΄ λ†’μ



<br/>

### μ¶”μƒ ν΄λμ¤μ™€ μΈν„°νμ΄μ¤ κ²°ν•©ν•κΈ°

**κ³¨κ²© κµ¬ν„ μ¶”μƒ ν΄λμ¤(skeletal implementation abstract class)**
: μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν•΄ νƒ€μ…μ„ μ •μν•λ©΄ **λ‹¤μ¤‘ μƒμ† λ¬Έμ λ¥Ό ν•΄κ²°**ν•  μ μμ§€λ§ **μ¤‘λ³µ μ½”λ“λ¥Ό μ κ±°ν•κΈ° μ–΄λ µ**κΈ° λ•λ¬Έμ—, **νƒ€μ…μ„ μ •μν•λ©΄μ„ μ½”λ“ μ¤‘λ³µμ„ λ°©μ§€ν•λ„λ΅ μ •μν• μ¶”μƒ ν΄λμ¤**.




#### μΈν„°νμ΄μ¤μ™€ μ¶”μƒ ν΄λμ¤ κ²°ν•©μ κ°•μ 

DiscountPolicy νƒ€μ…μ€ μ¶”μƒ ν΄λμ¤λ¥Ό μ΄μ©ν•΄μ„ κµ¬ν„ν–κΈ° λ•λ¬Έμ— DiscountPolicy νƒ€μ…μ— μ†ν•λ” λ¨λ“  κ°μ²΄λ“¤μ€ ν•λ‚μ μƒμ† κ³„μΈµ μ•μ— λ¬¶μ—¬μ•Ό ν•λ” μ μ•½μ„ κ°€μ§

<img src="./image/imageB5.png" width="70%" />


<table>
<tr><th>Interface</th><th>Abstract Class</th><th>class</th></tr>
<tr><td>

```java
public interface DiscountPolicy {
    Money calculateDiscountAmount(Screening screening);
}
```

</td><td>

```java
public abstract class DefaultDiscountPolicy implements DiscountPolicy {
    private List<DiscountCondition> conditions = new ArrayList<>();
   
    public DefaultDiscountPolicy(DiscountCondition... conditions) {
        this.conditions = Arrays.asList(conditions);
    }
    
    @Override
    public Money calculateDiscountAmount(Screening screening) {
        for(DiscountCondition each : conditions) {
            if (each.isSatisfiedBy(screening)) {
                return getDiscountedFee(screening);
            }
        }
        return screening.getMovieFee();
        
    }
    
    abstract protected Money getDiscountAmount(Screening screening);
}
```

</td><td>

```java
public class AmountDiscountPolicy extends DefaultDiscountPolicy { ... }

public class PercentDiscountPolicy extends DefaultDiscountPolicy { ... }
```

</td></tr>
</table>

<br/><br/>


**μΈν„°νμ΄μ¤μ™€ μ¶”μ‹±ν΄λμ¤λ¥Ό κ²°ν•©ν•μ—¬ νƒ€μ…μ„ μ •μν•  λ•μ μ¥μ **

- λ‹¤μ–‘ν• κµ¬ν„ λ°©λ²•μ΄ ν•„μ”ν•  κ²½μ° μƒλ΅μ΄ μ¶”μƒ ν΄λμ¤λ¥Ό μ¶”κ°€ν•΄μ„ μ‰½κ² ν•΄κ²° κ°€λ¥.
- λ¶€λ¨ ν΄λμ¤κ°€ μ΄λ―Έ μμ–΄λ„, μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μƒλ΅μ΄ νƒ€μ…μΌλ΅ μ‰½κ² ν™•μ¥ κ°€λ¥.

<br/>


> μ„¤κ³„κ°€ λ³µμ΅ν•  κ²½μ° (μƒμ† κ³„μΈµμ— μ–½λ§¤μ΄μ§€ μ•λ” νƒ€μ… κ³„μΈµμ„ μ”κµ¬ν•λ‹¤λ©΄): 
> - μΈν„°νμ΄μ¤λ΅ νƒ€μ…μ„ μ •μν•κ³ , μ¶”μƒ ν΄λμ¤λ΅ κΈ°λ³Έ κµ¬ν„μ„ μ κ³µν•΄μ„ μ¤‘λ³µ μ½”λ“λ¥Ό μ κ±°ν•λΌ
> 
> λ³µμ΅ν•μ§€ μ•λ‹¤λ©΄:
> - μΈν„°νμ΄μ¤λ‚ μ¶”μƒ ν΄λμ¤ λ‘ μ¤‘ ν•λ‚λ§ μ‚¬μ© 

<br/>

### λ• νƒ€μ΄ν•‘ μ‚¬μ©ν•κΈ°


**λ• ν…μ¤νΈ(duck test)**

:: μ–΄λ–¤ λ€μƒμ **ν–‰λ™**μ΄ μ¤λ¦¬μ™€ κ°™λ‹¤λ©΄ κ·Έκ²ƒμ„ μ¤λ¦¬λΌλ” νƒ€μ…μΌλ΅ μ·¨κΈ‰ν•΄λ„ λ¬΄λ°©ν•λ‹¤λ” κ²ƒ

> μ–΄λ–¤ μƒκ°€ μ¤λ¦¬μ²λΌ κ±·κ³ , μ¤λ¦¬μ²λΌ ν—¤μ—„μΉλ©°, μ¤λ¦¬μ²λΌ κ½¥κ½¥ μ†λ¦¬λ¥Ό λ‚Έλ‹¤λ©΄ λ‚λ” μ΄ μƒλ¥Ό μ¤λ¦¬λΌκ³  λ¶€λ¥Ό κ²ƒμ΄λ‹¤.
> 
> _- μ μ„μ¤ μ—μ½¤ λ¦΄λ¦¬(James Whitcom Riley)_

<br/>

**μλ°” κ°™μ€ λ€λ¶€λ¶„μ μ •μ  νƒ€μ… μ–Έμ–΄λ” λ• νƒ€μ΄ν•‘μ„ μ§€μ›ν•μ§€ μ•μ**

- λ™μΌν• νƒ€μ…μΌλ΅ μ·¨κΈ‰ν•κΈ° μ„ν•΄μ„λ” **μ½”λ“ μƒμ νƒ€μ…μ΄ λ™μΌν•κ² μ„ μ–Έ**λΌ μμ–΄μ•Όλ§ ν•¨
- μ•„λ `SalariedEmployee` ν΄λμ¤μ™€ `HourlyEmployee` ν΄λμ¤: `Employee` μΈν„°νμ΄μ¤μ— μ •μλ `calculatePay` μ¤νΌλ μ΄μ…κ³Ό λ™μΌν• μ‹κ·Έλ‹μ²λ¥Ό κ°€μ§„ νΌλΈ”λ¦­ λ©”μ„λ“λ¥Ό ν¬ν•¨
- μ¦‰, λ‹¨μν λ™μΌν• μ‹κ·Έλ‹μ²μ λ©”μ„λ“λ¥Ό ν¬ν•¨ν•λ‹¤κ³  ν•΄μ„ κ°™μ€ νƒ€μ…μΌλ΅ νλ‹¨ν•μ§€ μ•μ

<br/>

**Java**

<table>
<tr><th>Interface</th><th>Abstract Class</th><th>class</th></tr>
<tr><td>

<pre><code lang="java">
public interface Employee {
    <b>Money calculatePay(double taxRate);</b>
}
</code></pre>

</td><td>

<pre><code lang="java">
public class SalariedEmployee {
    private String name;
    private Money basePay;

    public SalariedEmployee(String name, Money basePay) {
        this.name = name;
        this.basePay = basePay;
    }

    <b>public Money calculatePay(double taxRate) {
        return basePay.minus(basePay.times(taxRate));
    }</b>
}
</code></pre>

</td><td>

<pre><code lang="java">
public class HourlyEmployee {
    private String name;
    private Money basePay;
    private int timeCard;

    public HourlyEmployee(String name, Money basePay, int timeCard) {
        this.name = name;
        this.basePay = basePay;
        this.timeCard = timeCard;
    }

    <b>public Money calculatePay(double taxRate) {
        return basePay.times(timeCard).minus(basePay.times(timeCard).times(taxRate));
    }</b>
}
</code></pre>

</td></tr>
</table>
<br/>

**Ruby**

λ£¨λΉ„ κ°™μ€ λ™μ  νƒ€μ… μ–Έμ–΄μ—μ„λ” μ‹κ·Έλ‹μ²κ°€ λ™μΌν• λ©”μ„λ“λ¥Ό κ°€μ§„ ν΄λμ¤λ” κ°™μ€ νƒ€μ…μΌλ΅ μ·¨κΈ‰ν•  μ μμ

<table>
<tr><th>Interface</th><th>Abstract Class</th><th>class</th></tr>
<tr><td>

<pre><code lang="ruby">
class SalariedEmployee
    def initialize(name, basePay)
        @name = name
        @basePay = basePay
    end
    
    <b>def calculatePay(taxRate)
        @basePay - (@basePay * taxRate)
    end</b>
end
</code></pre>

</td><td>

<pre><code lang="ruby">
class HourlyEmployee < Employee
    def initialize(name, basePay, timeCard)
        @name = name
        @basePay = basePay
        @timeCard = timeCard
    end
    
    <b>def calculatePay(taxRate)
        (@basePay * @timeCard) - (@basePay * @timeCard) * taxRate
    end</b>
end
</code></pre>

</td></tr>
</table>
<br/>


β”οΈ **λ• νƒ€μ΄ν•‘**: `calculatePay(taxRate)` λΌλ” ν–‰λ™μ„ μν–‰ν•  μ μμΌλ©΄ μ΄ κ°μ²΄λ¥Ό Employee μ΄λΌκ³  λ¶€λ¥Ό μ μλ” κ²ƒ. (λ§μΉ κ½¥κ½¥κ±°λ¦¬λ” λ¨λ“  κ²ƒμ„ μ¤λ¦¬λΌκ³  λ¶€λ¥΄λ” κ²ƒμ²λΌ)

- λ• νƒ€μ΄ν•‘μ€ ν΄λμ¤λ‚ μΈν„°νμ΄μ¤μ— λ€ν• μμ΅΄μ„±μ„ λ©”μ‹μ§€μ— λ€ν• μμ΅΄μ„±μΌλ΅ λ€μ²΄
 
<br/>

> κ°μ²΄μ§€ν–¥ μ„¤κ³„μ λ©ν‘λ” μ½”λ“μ μμ • λΉ„μ©μ„ μ¤„μ΄λ” κ²ƒ.
> 
> μ• ν”λ¦¬μΌ€μ΄μ… μ„¤κ³„μ ν•µμ‹¬μ€ λ©”μ‹μ§€μ΄λ©°, μ—„κ²©ν μ •μλ νΌλΈ”λ¦­ μΈν„°νμ΄μ¤λ¥Ό κµ¬μ¶•ν•λ” κ³Όμ •μ΄ μ¤‘μ”ν•λ‹¤.
> 
> μ΄ λ‘μ„ ν†µν•©ν• μ„¤κ³„ κΈ°μ μ΄ **λ• νƒ€μ΄ν•‘**μ΄λ‹¤.
> ...
> λ• νƒ€μ…μ€ νΉμ • ν΄λμ¤μ— μΆ…μ†λμ§€ μ•μ€ νΌλΈ”λ¦­ μΈν„°νμ΄μ¤. 
> μ—¬λ¬ ν΄λμ¤λ¥Ό κ°€λ΅μ§€λ¥΄λ©° ν΄λμ¤μ— λ€ν• κ°’λΉ„μ‹Ό μμ΅΄μ„ λ©”μ‹μ§€μ— λ€ν• λ¶€λ“λ¬μ΄ μμ΅΄μΌλ΅ λ€μΉμ‹ν‚¤λ©°, μ• ν”λ¦¬μΌ€μ΄μ…μ„ κµ‰μ¥ν μ μ—°ν•κ² λ§λ“¤μ–΄μ¤
> 
> _- Metz_

- λ• νƒ€μ΄ν•‘μ€ λ™μ  νƒ€μ… μ–Έμ–΄μ—μ„ λ„λ¦¬ μ‚¬μ©λλ” κΈ°λ²•μ΄μ§€λ§, μ •μ  νƒ€μ… μ–Έμ–΄ μ¤‘μ—μ„λ„ λ• νƒ€μ΄ν•‘μ„ μ§€μ›ν•λ” μ–Έμ–΄λ“¤μ΄ μμ: 
  - C#
  - C++μ ν…ν”λ¦Ώ(template)
    - μ λ„¤λ¦­ ν”„λ΅κ·Έλλ°μ„ κµ¬ν„
    - νƒ€μ… μ•μ „μ„± + λ• νƒ€μ΄ν•‘
    - μ»΄νμΌνƒ€μ„ μ²΄ν¬λ¥Ό ν†µν•΄ νƒ€μ… μ•μ „μ„±μ„ λ³΄μ¥

<br/>

### λ―Ήμ¤μΈκ³Ό νƒ€μ… κ³„μΈµ


λ―Ήμ¤μΈ( mixin ): κ°μ²΄λ¥Ό μƒμ„±ν•  λ• μ½”λ“ μΌλ¶€λ¥Ό μ„μ–΄ λ„£μ„ μ μλ„λ΅ λ§λ“¤μ–΄μ§„ μΌμΆ…μ μ¶”μƒ μ„λΈν΄λμ¤
- λ©μ : λ‹¤μ–‘ν• κ°μ²΄ κµ¬ν„ μ•μ—μ„ λ™μΌν• β€ν–‰λ™β€™μ„ μ¤‘λ³µ μ½”λ“ μ—†μ΄ μ¬μ‚¬μ©ν•  μ μκ² λ§λ“λ” κ²ƒ

<br/>


**λ””ν΄νΈ λ©”μ„λ“( default method )**
- μΈν„°νμ΄μ¤μ— λ©”μ„λ“μ κΈ°λ³Έ κµ¬ν„μ„ μ¶”κ°€ν•λ” κ²ƒμ„ ν—μ©
- 'μ¶”μƒ ν΄λμ¤κ°€ μ κ³µν•λ” μ½”λ“ μ¬μ‚¬μ©μ„± + νΉμ •ν• μƒμ† κ³„μΈµμ— μ–½λ§¤μ΄μ§€ μ•λ” μΈν„°νμ΄μ¤'μ μ¥μ  μ μ§€
- **μλ°”μ—μ„ λ―Ήμ¤μΈμ„ κµ¬ν„ν•  μ μλ” κΈ°λ¥**

<pre><code lang="java">
public interface DiscountPolicy {

    /**
    * default ν‚¤μ›λ“λ΅ calculateDiscountAmount μ¤νΌλ μ΄μ… κΈ°λ³Έ κµ¬ν„ μ κ³µ
    **/
    <b>default</b> Money calculateDiscountAmount(Screening screening) {
        for (DiscountCondition each : getConditions()) {
            if (each.isSatisfiedBy(screening)) {
                return getDiscountAmount(screening);
            }
            return screening.getMovieFee();
        }

    }

    List<DiscountCondition> getConditions();

    Money getDiscountAmount(Screening screening);
}
</code></pre>


**λ””ν΄νΈ λ©”μ„λ“κ°€ κ°€μ§€λ” ν•κ³„**
- `getConditions` μ¤νΌλ μ΄μ…κ³Ό `getDiscountAmount` μ¤νΌλ μ΄μ…μ΄ μΈν„°νμ΄μ¤μ— μ¶”κ°€
- μ΄ λ©”μ„λ“λ“¤μ΄ μΈν„°νμ΄μ¤μ— μ •μλΌ μκΈ° λ•λ¬Έμ— ν΄λμ¤ μ•μ—μ„ νΌλΈ”λ¦­ λ©”μ„λ“λ΅ κµ¬ν„ν•΄μ•Ό ν•¨


```java
public class AmountDiscountPolicy implements DiscountPolicy {

    private Money discountAmount;
    
    private List<DiscountCondition> conditions = new ArrayList<>();
    
    public AmountDiscountPolicy(Money discountAmount, DiscountCondition... conditions) {
        this.discountAmount = discountAmount;
        this.conditions = Arrays.asList(conditions);
    }
    
    @Override
    public List<DiscountCondition> getConditions() {
        return conditions;
    }
    
    @Override
    public Money getDiscountAmount(Screening screening) {
        return discountAmount;
    }
}
```

+ λ¬Έμ μ : AmountDiscountPolicy μ™€ PercentDiscountPolicy ν΄λμ¤ μ‚¬μ΄μ μ½”λ“ μ¤‘λ³µμ„ μ™„λ²½ν•κ² μ κ±°ν•΄ μ£Όμ§€ λ»ν•¨

- λ””ν΄νΈ λ©”μ„λ“κ°€ μΈν„°νμ΄μ¤λ΅ μ¶”μƒ ν΄λμ¤μ μ—­ν• μ„ λ€μ²΄ν•λ ¤λ” κ²ƒμ΄ μ•„λ‹κΈ° λ•λ¬Έ
- νƒ€μ…μ„ μ •μν•κΈ° μ„ν•΄ λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ‚¬μ©ν•  μƒκ°μ΄λΌλ©΄ κ·Έ ν•κ³„λ¥Ό λ…ν™•ν•κ² μ•μ•„λ‘μ–΄μ•Ό ν•¨

